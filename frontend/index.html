<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Instana Digital Bank</title>

<!-- ================= INSTANA EUM (UPDATED) ================= -->
<script>
  (function(s,t,a,n){s[t]||(s[t]=a,n=s[a]=function(){n.q.push(arguments)},
  n.q=[],n.v=2,n.l=1*new Date)})(window,"InstanaEumObject","ineum");

  ineum('reportingUrl', 'https://eum-blue-saas.instana.io');
  ineum('key', 'X3zK_XadSDCwN5KEv57sjA');
  ineum('trackSessions');
  ineum('autoPageDetection', true);
</script>
<script defer crossorigin="anonymous" src="https://eum.instana.io/eum.min.js"></script>
<!-- =============================================================== -->

<style>
:root { --primary:#0b3c5d; --secondary:#328cc1; --success:#2ecc71; --danger:#e74c3c; --bg:#f5f7fa; }
body { margin:0; font-family:Segoe UI,Arial; background:var(--bg); }
header { background:linear-gradient(90deg,var(--primary),var(--secondary)); color:white; padding:20px 40px; }
.container { padding:30px; display:grid; grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); gap:20px; }
.card { background:white; padding:20px; border-radius:10px; box-shadow:0 10px 25px rgba(0,0,0,.1); }
.card h3 { margin-top:0;color:var(--primary); }
input { width:100%; padding:10px; margin-bottom:10px; border:1px solid #ddd; border-radius:4px; box-sizing: border-box; }
button { width:100%; padding:10px; border:none; border-radius:6px; background:var(--primary); color:white; cursor:pointer; font-weight:bold; }
button:hover { background:var(--secondary); }
button.success { background:var(--success); }
button.danger { background:var(--danger); }
.output { grid-column:1/-1; background:black; color:#00ffcc; padding:15px; font-family:monospace; min-height:150px; white-space: pre-wrap; }
.toast { position:fixed; top:20px; right:20px; padding:15px 20px; border-radius:8px; color:white; opacity:0; transition:.4s; z-index:9999; }
.toast.show { opacity:1; }
.toast.success { background:#2ecc71; }
.toast.error { background:#e74c3c; }
</style>
</head>

<body>
<header><h2>üè¶ Instana Digital Banking Platform</h2></header>

<div class="container">
    <div class="card">
        <h3>üÜï Open Account</h3>
        <input id="openId" placeholder="Account ID">
        <input id="openUser" placeholder="User Name">
        <input id="openBalance" type="number" placeholder="Initial Balance">
        <button class="success" onclick="openAccount()">Create Account</button>
    </div>
    <div class="card">
        <h3>üí∞ Balance Check</h3>
        <input id="balanceId" placeholder="Account ID">
        <button onclick="checkBalance()">Check Balance</button>
    </div>
    <div class="card">
        <h3>‚ûï Credit</h3>
        <input id="creditId" placeholder="Account ID">
        <input id="creditAmount" type="number" placeholder="Amount">
        <button onclick="credit()">Credit</button>
    </div>
    <div class="card">
        <h3>‚ûñ Debit</h3>
        <input id="debitId" placeholder="Account ID">
        <input id="debitAmount" type="number" placeholder="Amount">
        <button onclick="debit()">Debit</button>
    </div>
    <div class="card">
        <h3>üèß ATM Withdraw</h3>
        <input id="atmId" placeholder="Account ID">
        <input id="atmAmount" type="number" placeholder="Amount">
        <button class="danger" onclick="atmWithdraw()">Withdraw</button>
    </div>
    <div class="card">
        <h3>üîÅ Fund Transfer</h3>
        <input id="fromId" placeholder="From Account ID">
        <input id="toId" placeholder="To Account ID">
        <input id="transferAmount" type="number" placeholder="Amount">
        <button onclick="transfer()">Transfer</button>
    </div>
    <div class="output" id="output">Waiting for action‚Ä¶</div>
</div>
<div id="toast" class="toast"></div>

<script>
const API="https://bankingdummy.onrender.com";
const out = document.getElementById("output");
function show(d){ out.textContent = JSON.stringify(d,null,2); }
function toast(msg, ok=true){
  let t=document.getElementById("toast");
  t.className="toast "+(ok?"success":"error");
  t.textContent=msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),4000);
}
function openAccount(){
  fetch(API+"/api/account/open",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      id:document.getElementById("openId").value,
      user:document.getElementById("openUser").value,
      initialBalance:+document.getElementById("openBalance").value
    })
  }).then(r=>r.json()).then(d=>{ show(d); toast(`Account Created: ${d.id}`); }).catch(e=>toast("Error", false));
}
function checkBalance(){
  fetch(API+"/api/account/balance/"+document.getElementById("balanceId").value)
  .then(r=>r.json()).then(d=>{ show(d); toast(`Balance: ‚Çπ${d.balance}`); });
}
function credit(){
  fetch(`${API}/api/account/credit?id=${document.getElementById("creditId").value}&amount=${document.getElementById("creditAmount").value}`,{method:"POST"})
  .then(r=>r.json()).then(d=>{ show(d); toast("Credit OK"); });
}
function debit(){
  fetch(`${API}/api/account/debit?id=${document.getElementById("debitId").value}&amount=${document.getElementById("debitAmount").value}`,{method:"POST"})
  .then(r=>r.json()).then(d=>{ show(d); toast("Debit OK"); });
}
function atmWithdraw(){
  fetch(`${API}/api/atm/withdraw?id=${document.getElementById("atmId").value}&amount=${document.getElementById("atmAmount").value}`,{method:"POST"})
  .then(r=>{ if(!r.ok) throw 0; return r.json(); })
  .then(d=>{ show(d); toast("Withdraw OK"); }).catch(()=>toast("Failed",false));
}
function transfer(){
  fetch(`${API}/api/account/transfer?fromId=${document.getElementById("fromId").value}&toId=${document.getElementById("toId").value}&amount=${document.getElementById("transferAmount").value}`,{method:"POST"})
  .then(r=>{ if(!r.ok) throw 0; return r.json(); })
  .then(d=>{ show(d); toast("Transfer OK"); }).catch(()=>toast("Failed",false));
}
</script>
</body>
</html>

